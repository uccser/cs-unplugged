{% extends "at_a_distance/base.html" %}

{% load i18n static render_html_field django_bootstrap_breadcrumbs %}

{% block title %}
    {{ lesson.name }}
{% endblock title %}

{% block breadcrumbs %}
    {% breadcrumb lesson.name "at_a_distance:lesson" lesson.slug %}
{% endblock breadcrumbs %}

{% block page_heading %}
    <h1 id="{{ lesson.slug }}">{{ lesson.name }}</h1>
    {% if not lesson.translation_available %}
      {% with model=lesson %}
        {% include "topics/not-available-warning.html" %}
      {% endwith %}
    {% endif %}
{% endblock page_heading %}

{% block content %}
    {% if lesson.translation_available %}
        {% render_html_field lesson.introduction %}

        <h2>Resources</h2>
        <ul>
            <li>
                <a href="{% url 'at_a_distance:lesson_slides' lesson.slug %}" target="_blank">
                    Open slides in presentation mode
                </a>
            </li>
            <li>
                <a href="{% static notes_pdf %}" target="_blank" download="{{ lesson.name }} - Speaker Notes.pdf">
                    Download speaker notes as PDF
                </a>
            </li>
            <li>
                <a href="{% static slides_pdf %}" target="_blank" download="{{ lesson.name }} - Slides.pdf">
                    Download slides as PDF
                </a>
                <em>(not recommended - no interactive elements)</em>
            </li>
        </ul>

        {% if lesson.supporting_resources.all %}
            <h3>Supporting Resources</h3>
            <ul id="supporting_resources">
                {% for supporting_resource in lesson.supporting_resources.all %}
                    <li>
                        <a href="{{ supporting_resource.url }}">
                            {{ supporting_resource.text }}
                        </a>
                    </li>
                {% endfor %}
            </ul>
        {% endif %}

        <h2>Preview slides with notes</h2>
        <aside class="reveal-controls-help-container">
            {% include "at_a_distance/components/reveal-controls-help.html" %}
        </aside>

        {% include "at_a_distance/components/reveal-slides-structure.html" with embed=True %}
    {% endif %}
{% endblock content %}

{% block scripts %}
    {{ block.super }}
    {% include "at_a_distance/components/reveal-initialize.html" with embedded="true" speaker_mode=False show_notes="true" %}
{% endblock scripts %}
