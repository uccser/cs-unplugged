@import "bootstrap/functions";
@import "bootstrap/variables";
@import "bootstrap/mixins";
@import "bootstrap-overrides";
@import "bootstrap/root";
@import "bootstrap/print";
@import "bootstrap/reboot";
@import "bootstrap/type";
@import "bootstrap/images";
@import "bootstrap/code";
@import "bootstrap/grid";
@import "bootstrap/tables";
@import "bootstrap/forms";
@import "bootstrap/buttons";
@import "bootstrap/transitions";
@import "bootstrap/dropdown";
@import "bootstrap/button-group";
@import "bootstrap/input-group";
@import "bootstrap/custom-forms";
@import "bootstrap/nav";
@import "bootstrap/navbar";
@import "bootstrap/card";
@import "bootstrap/breadcrumb";
@import "bootstrap/pagination";
@import "bootstrap/badge";
@import "bootstrap/jumbotron";
@import "bootstrap/alert";
@import "bootstrap/progress";
@import "bootstrap/media";
@import "bootstrap/list-group";
@import "bootstrap/close";
@import "bootstrap/modal";
@import "bootstrap/tooltip";
@import "bootstrap/popover";
@import "bootstrap/carousel";
@import "bootstrap/utilities";
@import "pygments-colorful";
@import "sticky-state";
@import "directional";
@import url('https://fonts.googleapis.com/css?family=Sniglet');
@import url('https://fonts.googleapis.com/css?family=Noto+Sans');

$ct-abstraction: #E30613;
$ct-algorithm: #0B983A;
$ct-decomposition: #E4AB0D;
$ct-evaluation: #0F70B7;
$ct-logic: #EA5B0C;
$ct-pattern: #82358C;

img {
  &.content-image {
    max-height: 18em;
  }
  &.inline-image {
    max-height: 3rem;
  }
  &.inline-image-small {
    max-height: 1.4rem;
  }
}

h1 {
  color: $red;
}
h2 {
  color: $purple;
}
h3 {
  color: $green;
}
h4,
h5,
h6 {
  color: $gray;
}

.subtitle {
  color: $gray-light;
}

input[type="text"].long-text-field {
  width: 20em;
}

div.plugged-in-language-implementation {
  border: 1px #e33333 solid;
  border-radius: 0.5em;
  margin: 1em 0;
  padding: 0 1em 1em 1em;
}

.disable-selection {
  user-select: none;
}

$rounded-corner-radius: 0.5rem;

.jumbotron {
  background: url("../img/red-hero-banner.png");
  background-size: cover;
  width: 100%;
  padding-top: 80px;
  padding-bottom: 60px;
  text-shadow: 0 2px 2px rgba(0,0,0,0.4);

  h1 {
    font-family: $headings-font-family;
    color: $white;
    font-size: 3.5rem;
  }

  p {
    color: $gray-lighter;
    font-size: 1rem;
  }
}

#homepage-cards {
  position: relative;
  top: -80px;
  margin-bottom: -50px;
}

.badge-language-unavailable {
  margin-#{$right}: auto;
  margin-bottom: auto;
  margin: 0.5em;
}

@include media-breakpoint-up(md) {
  .trans-navbar {
    background-color: rgba(0,0,0,0) !important;
    box-shadow: none !important;
  }
}

.navbar {
  background-color: $red;
  transition: background-color .3s ease 0s;
  box-shadow: 0px 0px 3px 0px #6b0a19;

  #navbar-brand-logo {
    height: 2rem;
    @include media-breakpoint-up(md) {
      padding-right: .5em;
    }
  }

  .navbar-nav .nav-link:hover {
    text-decoration: underline;
  }
}

.white-footer {
  border-top: 2px $red solid;
}

.footer-statement {
  border-top: 1px $white solid;
}

#page-footer {
  background-color: $red;
  color: rgba($white, 0.6);
  a {
    color: $white;
    @include hover-focus {
      color: $white;
    }
  }
}

#sponsor-logos img {
  max-height: 4rem;
}

.glossary-term {
  border-bottom: 1px $gray dotted;
  cursor: help;
}

.boxed-text {
  border: 2px dashed $gray-light;
  border-radius: $border-radius;
  margin-bottom: $spacer;

  .boxed-text-content {
    margin: ($spacer * .5) ($spacer * .5);
    overflow: auto;
  }
}

.boxed-text-indented {
  margin-#{$left}: 1em;
}

@mixin detail-colour-variant($color) {
  > summary {
    background-color: hsl(hue($color), saturation($color), 90%);
    color: $color !important;
    &:hover {
      background-color: hsl(hue($color), saturation($color), 85%);
    }
  }
}

$details-summary-bg: #dde0e2;
details {
  @extend .boxed-text;
  overflow: hidden;
  background-color: $gray-lighter;

  summary {
    background-color: $details-summary-bg;
    color: $gray-dark;
    cursor: pointer;
    font-size: 1.1em;
    padding: ($spacer * .25) ($spacer * .25) ($spacer * .25) $spacer;
    display: flex;
    align-items: center;
    .inline-image {
      margin-top: 0.2rem;
      margin-bottom: 0.2rem;
      margin-#{$left}: auto;
      margin-#{$right}: 0.2rem;
    }
  }
  summary:hover {
    background-color: darken($details-summary-bg, 10%);
  }
  &.panel-ct-abstraction {
    @include detail-colour-variant($ct-abstraction);
  }
  &.panel-ct-algorithm {
    @include detail-colour-variant($ct-algorithm);
  }
  &.panel-ct-decomposition {
    @include detail-colour-variant($ct-decomposition);
  }
  &.panel-ct-evaluation {
    @include detail-colour-variant($ct-evaluation);
  }
  &.panel-ct-logic {
    @include detail-colour-variant($ct-logic);
  }
  &.panel-ct-pattern {
    @include detail-colour-variant($ct-pattern);
  }
}

.difficulty-level {
  color: white;
}
.difficulty-level-{
  &0 {
    background-color: #DABB00;
  }
  &1 {
    background-color: $blue;
  }
  &2 {
    background-color: $green;
  }
  &3 {
    background-color: $red;
  }
}

.embed-responsive {
   margin: $spacer 0;
}

.badge {
  &-pink {
    background-color: $pink;
  }
  &-green {
    background-color: $green;
  }
  &-orange {
    background-color: $orange;
  }
  &-teal {
    background-color: $teal;
  }
  &-blue {
    background-color: $blue;
  }
  &-light-purple {
    background-color: $light-purple;
  }
  &-purple {
    background-color: $purple;
  }
  &-yellow {
    background-color: $yellow;
  }
  &-red {
    background-color: $red;
  }
  color: $white;
  &:hover {
    color: $white;
  }
}

$navbar-height: 50px;
$navbar-padding-bottom: 24px;
body {
  padding-top: $navbar-height;
  &.homepage {
    padding-top: 0px;
  }
  position: relative;
  background-color: $gray-100;
}

#content-container {
  padding-top: $navbar-padding-bottom;
}
#sticky-sidebar {
  top: $navbar-height + $navbar-padding-bottom;
}
.sticky-top {
  z-index: 1020;
}

.table.table-center-vertical th,
.table.table-center-vertical td {
    vertical-align: middle;
}
.table-success-cell {
  background-color: lighten($green, 40%);
}

#scrollspy-table-of-contents .nav-link {
  font-size: 0.9rem;
  padding: ($spacer * .25) $spacer;
}

#content-container table:not(.table) {
  display: block;
  margin-bottom: $spacer;
  width: 100%;
  max-width: 100%;
  background-color: $table-bg;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  -ms-overflow-style: -ms-autohiding-scrollbar;
  th,
  td {
    padding: 0.5rem;
    font-size: 0.9rem;
    vertical-align: top;
    border-top: $table-border-width solid $table-border-color;
    white-space: nowrap;
  }
  th {
    color: $table-head-color;
    background-color: $table-head-bg;
    border-color: $table-border-color;
  }
}

.inline-scratch {
  display: inline;
  vertical-align: middle;
}

.border-thin {
  border: 1px solid #ddd;
  border-radius: 3px;
}

.background-csfg {
  background-color: #2b387c;
}

@include media-breakpoint-down("sm") {
  .navbar-toggleable-sm > .container {
    width: 100%;
  }
}

.table-text-large {
  font-size: 1.2rem;
}

.btn {
  cursor: pointer;
}

ol, ul {
    margin-bottom: 1rem !important;
}

.large-text {
  font-size: 3rem;
}

.no-text-decoration {
  text-decoration: none !important;
}

.link-item {
  background-color: $white;
  border-#{$left}: 5px solid $blue;
  box-shadow: 0px 2px 5px 0px $gray-500;
  border-radius: 4px;
  &.link-item-top {
    border: 0;
    border-top: 7px solid $blue;
    &-green {
      border-top-color: $green;
      &:hover {
        background-color: mix($green, $white, 10%);
      }
    }
    &-yellow {
      border-top-color: $yellow;
      &:hover {
        background-color: mix($yellow, $white, 10%);
      }
    }
    &-light-purple {
      border-top-color: $light-purple;
      &:hover {
        background-color: mix($light-purple, $white, 10%);
      }
    }
    &-orange {
      border-top-color: $orange;
      &:hover {
        background-color: mix($orange, $white, 10%);
      }
    }
    &-teal {
      border-top-color: $teal;
      &:hover {
        background-color: mix($teal, $white, 10%);
      }
    }
    .img-container {
      height: 8em;
      img {
        max-height: 100%;
      }
    }
  }
  padding: 0.5rem 1rem;
  h2, h3 {
    color: $gray;
  }
  h2 {
    font-size: 28px;
  }
  h3 {
    font-size: 26px;
  }
  img {
    max-height: 6rem;
  }
  .summary {
    @extend .border-left;
    @extend .pl-3;
    @extend .text-center;
    @extend .text-muted;
    .summary-value {
      font-size: 3em;
      line-height: 1;
    }
  }
  &:hover {
    transform: translateY(2px);
    background-color: mix($blue, $white, 10%);
  }
  &.unavailable {
    background-color: rgba($black, 0.2);
    img {
      opacity: 0.5;
    }
  }
  .badge-language-unavailable {
    margin-#{$right}: auto;
    margin-bottom: auto;
    margin-top: 0;
    margin-#{$left}: 0;
  }
}

.list-unstyled-i18n {
  padding-#{$left}: 0;
  padding-#{$right}: auto;
}

.navbar-nav-i18n {
  margin-#{$right}: auto !important;
  margin-#{$left}: 0 !important;
}

.img-container {
  img {
    @include img-fluid;
  }
  margin-bottom: $spacer * 0.5;
  @include media-breakpoint-up(md) {
    margin-top: $spacer * 0.5;
    &.img-wrap-left {
      @include float-left;
      margin-right: $spacer * 0.5;
    }
    &.img-wrap-right {
      @include float-right;
      margin-left: $spacer * 0.5;
    }
    &.img-wrap-left,
    &.img-wrap-right {
      max-width: 50%;
    }
  }
  @include media-breakpoint-down(sm) {
    &.img-wrap-left,
    &.img-wrap-right {
      text-align: center;
    }
  }
  &:not(.img-wrap-left),
  &:not(.img-wrap-right) {
    display: block;
    text-align: center;
  }
}

h1, h2, h3, h4, h5, h6, details {
  clear: both;
}

@media print {
  body {
    padding-top: 0;
    background-color: $white;
  }
  .link-item {
    border-top: 2px solid $gray-400;
    border-right: 2px solid $gray-400;
    border-bottom: 2px solid $gray-400;
  }
  .print-col-12 {
    flex: 0 0 100% !important;
    max-width: 100% !important;
  }
  .print-col-6 {
    flex: 0 0 50% !important;
    max-width: 50% !important;
  }
  .print-order-1 {
    order: 1;
  }
  .print-order-2 {
    order: 2;
  }
}

// Fix for displaying images correcting in Internet Explorer
// See: https://github.com/twbs/bootstrap/issues/25242
.figure {
  display: block !important;
}

/*
 The following rules are used to better display <details> elements in Internet
 Explorer and Edge, as they are currently unsupported. A JavaScript polyfill
 is used to add functionality, however the following rules ensure to remove
 some other issues.

 1. border: 0;
    This is used as these browsers do not correctly calculate the position of
    the element, and the border displays as a vertical line beside the element.
    This removes the border completely.

 2. background-color: $gray-lighter;
    This provides a backup to ensure the detail's contents display with a
    background colour, by colouring a child div element which these browser
    can properly calculate size and position. Without this the content is
    displayed with no background colour, and it is hard for a user to decipher
    what text belows to the detail element.

 3. padding: 0.5rem 1rem 0;
    This provides extra spacing around the text within the panel so it doesn't
    hit the background coloured edge.

 Both sets of rules use CSS tricks to determine the browser. If these fail, a
 JavaScript function could run on each page to determine the browser, or the
 Django system could check the browser and include an optional file with these
 rules.
*/
// IE10+ detail support
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  details {
    border: 0 !important;
    .boxed-text-content {
      background-color: $gray-lighter !important;
      padding: 0.5rem 1rem 0;
    }
  }
}
// Edge 12+ detail support
@supports (-ms-ime-align:auto) {
  details {
    border: 0 !important;
    .boxed-text-content {
      background-color: $gray-lighter !important;
      padding: 0.5rem 1rem 0;
    }
  }
}

#welcome-alert {
  @extend .alert;
  background-color: rgba(245, 126, 126, 0.5);
  border-color: rgba(189, 76, 76, 0.85);
  strong {
    font-weight: bold;
    font-size: 1.1rem;
  }
  a {
    color: $gray-lighter;
  }
}

#navbarLanguageSelector {
  padding: 4px 7.25px;
  font-size: 1.25rem;
  line-height: 1;
  background-color: transparent;
  border: 1px solid $white;
  border-radius: 0.25rem;
  cursor: pointer;
}
@include media-breakpoint-up("md") {
  #navbarLanguageSelector {
    border-color: transparent;
  }
  #navbarLanguageSelector:hover,
  #navbarLanguageSelector:focus {
    border-color: $white;
  }
}
#navbarLanguageDropdown.dropdown-menu-right {
  right: 0;
  left: auto;
}

.icon {
  display: block;
  margin: auto;
  stroke-width: 0;
  stroke: $white;
  fill: $white;
}
.icon-language {
  height: 1.5em;
}
.icon-search {
  width: 1em;
  height: 1em;
}
button:hover .icon-search {
  stroke: $red;
  fill: $red;
}

#search-navbar {
  input,
  button {
    line-height: 1.4 !important;
    padding-left: 0.4rem !important;
    padding-right: 0.4rem !important;
  }
}
